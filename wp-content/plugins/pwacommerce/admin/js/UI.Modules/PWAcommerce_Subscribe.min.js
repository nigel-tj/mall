function PWACOMMERCE_SUBSCRIBE(){var e=this;this.type="pwacommerce_subscribe",this.container,this.form,this.DOMDoc,this.send_btn,this.submitURL,this.init=function(){PWACJSInterface=window.parent.PWACJSInterface,this.send_btn=jQuery("#"+this.type+"_send_btn",this.container).get(0),this.form=jQuery("#"+this.type+"_form",this.container).get(0),this.addButtonsActions(),null!=this.form&&this.initValidation()},this.initValidation=function(){this.validator=jQuery("#"+this.form.id,this.container).validate({rules:{pwacommerce_subscribe_email:{required:!0,email:!0}},messages:{pwacommerce_subscribe_email:{email:"Invalid e-mail address"}},errorPlacement:function(t,r){var i=r[0].id.split("_"),a=i.length>1?i[i.length-1]:i[0],n=jQuery("#error_"+a+"_container",e.DOMDoc);t.appendTo(n)},errorElement:"span"});var t=jQuery("#"+this.type+"_email",this.container);t.data("holder",t.attr("placeholder")),t.focusin(function(){jQuery(this).attr("placeholder","")}).focusout(function(){jQuery(this).attr("placeholder",jQuery(this).data("holder"))})},this.addButtonsActions=function(){jQuery(this.send_btn).unbind("click"),jQuery(this.send_btn).bind("click",function(){e.disableButton(this),e.validate()}),e.enableButton(this.send_btn),jQuery("#"+e.form.id,e.DOMDoc).bind("keypress",function(e){if(13==e.keyCode)return!1})},this.enableButton=function(e){jQuery(e).css("cursor","pointer"),jQuery(e).animate({opacity:1},100)},this.disableButton=function(e){jQuery(e).unbind("click"),jQuery(e).animate({opacity:.4},100),jQuery(e).css("cursor","default")},this.validate=function(){jQuery(this.form).validate().form();var t=[];for(var r in this.validator.invalid){var i=jQuery(this.form[r]);t.push(i.offset().top)}0==t.length?e.sendData():e.addButtonsActions()},this.sendData=function(){PWACJSInterface.Preloader.start(),jQuery.ajax({url:e.submitURL,type:"post",data:{email:jQuery("#"+e.type+"_email",e.container).val(),list:"pwacommerce"},dataType:"jsonp",success:function(t){if(PWACJSInterface.Preloader.remove(100),1===Number(String(t.status)))PWACJSInterface.Loader.display({message:"Your subscription has been confirmed."}),jQuery(e.form).hide(),jQuery("#"+e.type+"_added",e.container).show(),jQuery.post(ajaxurl,{action:"pwacommerce_subscribe",pwacommerce_subscribed:1},function(e){});else{var r="There was an error. Please reload the page and try again in few seconds or contact the plugin administrator if the problem persists.";t.message&&""!=t.message&&(r="There was an error: "+String(t.message)),PWACJSInterface.Loader.display({message:r}),e.form.reset(),setTimeout(function(){var t=e.form.elements;for(nElems=t.length,j=0;j<nElems;j++)t[j].disabled=!1},300),e.addButtonsActions()}},error:function(){PWACJSInterface.Preloader.remove(100),PWACJSInterface.Loader.display({message:"There was an error. Please reload the page and try again in few seconds or contact the plugin administrator if the problem persists."})}})}}