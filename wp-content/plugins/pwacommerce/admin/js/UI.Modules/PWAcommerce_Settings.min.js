function PWACOMMERCE_SETTINGS(){var t=this;this.type="pwacommerce_settings",this.form,this.DOMDoc,this.send_btn,this.init=function(){PWACJSInterface=window.parent.PWACJSInterface,this.send_btn=jQuery("#"+this.type+"_send_btn",this.DOMDoc).get(0),this.form=this.DOMDoc.getElementById(this.type+"_form"),this.addButtonsActions(),null!=this.form&&this.initValidation()},this.initValidation=function(){jQuery.validator.addMethod("regex",function(t,e,i){var n=new RegExp(i,"i");return this.optional(e)||n.test(t)},"Your code is invalid"),this.validator=jQuery("#"+this.form.id,this.DOMDoc).validate({rules:{pwacommerce_settings_analyticsid:{regex:"^ua-\\d{4,9}-\\d{1,4}$"}},errorPlacement:function(e,i){var n=i[0].id.split("_"),r=n.length>1?n[n.length-1]:n[0],o=jQuery("#error_"+r+"_container",t.DOMDoc);e.appendTo(o)},errorElement:"span"}),jQuery("#pwacommerce_settings_service_worker_installed_check",t.DOMDoc).change(function(){this.checked?jQuery("#"+t.type+"_service_worker_installed",t.DOMDoc).val("1"):jQuery("#"+t.type+"_service_worker_installed",t.DOMDoc).val("0")});var e=jQuery("#"+this.type+"_analyticsid",this.form);e.data("holder",e.attr("placeholder")),e.focusin(function(){jQuery(this).attr("placeholder","")}).focusout(function(){jQuery(this).attr("placeholder",jQuery(this).data("holder"))})},this.addButtonsActions=function(){jQuery(this.send_btn).unbind("click"),jQuery(this.send_btn).bind("click",function(){t.disableButton(this),t.validate()}),t.enableButton(this.send_btn)},this.enableButton=function(t){jQuery(t).css("cursor","pointer"),jQuery(t).animate({opacity:1},100)},this.disableButton=function(t){jQuery(t).unbind("click"),jQuery(t).animate({opacity:.4},100),jQuery(t).css("cursor","default")},this.validate=function(){jQuery(this.form).validate().form();var e=[];for(var i in this.validator.invalid){var n=jQuery(this.form[i]);e.push(n.offset().top)}0==e.length?t.sendData():t.addButtonsActions()},this.submitForm=function(){return PWACJSInterface.AjaxUpload.dosubmit(t.form,{onStart:t.startUploadingData,onComplete:t.completeUploadingData})},this.sendData=function(){jQuery("#"+this.form.id,this.DOMDoc).unbind("submit"),jQuery("#"+this.form.id,this.DOMDoc).bind("submit",function(){t.submitForm()}),jQuery("#"+this.form.id,this.DOMDoc).submit(),t.disableButton(t.send_btn)},this.startUploadingData=function(){return PWACJSInterface.Preloader.start(),setTimeout(function(){var e=t.form.elements;for(nElems=e.length,j=0;j<nElems;j++)e[j].disabled=!0},300),!0},this.completeUploadingData=function(e){jQuery("#"+t.form.id,t.DOMDoc).unbind("submit"),jQuery("#"+t.form.id,t.DOMDoc).bind("submit",function(){return!1}),PWACJSInterface.Preloader.remove(100);var i=JSON.parse(e);Boolean(Number(String(i.status)));PWACJSInterface.Loader.display({message:i.message}),setTimeout(function(){var e=t.form.elements;for(nElems=e.length,j=0;j<nElems;j++)e[j].disabled=!1},300),t.addButtonsActions()}}